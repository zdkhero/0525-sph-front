# å°šå“æ±‡ç¬¬ 3 å¤©



## 1. Mock.js çš„åŸºæœ¬ä½¿ç”¨



**æ€è·¯åˆ†æï¼š**



åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå‰ç«¯å’Œåç«¯ä¸€èˆ¬æ˜¯å¹¶è¡Œå¼€å‘ï¼Œå‰ç«¯éœ€è¦åç«¯æä¾›çš„æ¥å£ï¼Œé€šè¿‡æ¥å£è¿”å›çš„æ•°æ®æ¸²æŸ“é¡µé¢ï¼Œä½†æ˜¯åç«¯ä¸»è¦è¿›è¡ŒåŠŸèƒ½çš„å¼€å‘ï¼Œå› ä¸ºåŠŸèƒ½æ¯”è¾ƒå¤æ‚ç­‰åŸå› ï¼Œæ¥å£éœ€è¦å¾ˆä¹…æ‰èƒ½å¼€å‘å®Œã€‚è¿™æ—¶å€™å°±ä¼šå­˜åœ¨å‰ç«¯é¡µé¢å¼€å‘å¥½äº†ï¼Œæ¥å£æ²¡æœ‰å®Œæˆçš„æƒ…å†µï¼Œè¿™æ—¶å€™ï¼Œä¸€èˆ¬å°±éœ€è¦å‰ç«¯ä½¿ç”¨ `Mock` æ¨¡æ‹Ÿã€ä¼ªé€ åç«¯è¿”å›çš„æ•°æ®ï¼Œå…ˆè¡Œè¿›è¡ŒåŠŸèƒ½çš„å¼€å‘ï¼Œå¾…æ¥å£å¼€å‘å®Œæˆåï¼Œå°† `Mock` çš„åœ°å€æ›¿æ¢æˆçœŸå®çš„æ¥å£åœ°å€å³å¯



`Mock` æ•°æ®çš„æ–¹å¼æœ‰å¾ˆå¤šï¼š

1. è‡ªå·±å†™ json ä¼ªé€ æ•°æ®
2. ä½¿ç”¨ Node å†™æœåŠ¡ï¼Œä¼ªé€ æ•°æ®
3. ä½¿ç”¨ json-serverã€Mock ç­‰ç¬¬ä¸‰æ–¹åº“



åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Mock ï¼Œå› ä¸ºä½¿ç”¨èµ·æ¥ç®€å•ã€æ–¹ä¾¿ã€æ•°æ®ç±»å‹ä¸°å¯Œã€‚



[Mock.js å®˜ç½‘](http://mockjs.com/)

[Mock.js ä½¿ç”¨æ–‡æ¡£](https://github.com/nuysoft/Mock/wiki)





**å®ç°æ­¥éª¤ï¼š**



1. å®‰è£… `mockjs`

   ```shell
   npm i mockjs
   ```

   

2. åœ¨`src/mock/index.js`åˆ¶è®¢æ‹¦æˆªè§„åˆ™ï¼ˆå†…å®¹å¦‚ä¸‹ï¼‰ï¼Œåªè¦é€šè¿‡å‘å‡ºå»çš„æ˜¯`get`ç±»å‹çš„ajaxè¯·æ±‚ï¼Œåœ°å€åªè¦æ˜¯`http://www.test.com`å°±èƒ½æ‹¦æˆªäº†ã€‚

   ```js
   import Mock from 'mockjs'
   //åˆ¶è®¢æ‹¦æˆªè§„åˆ™
   Mock.mock('http://www.test.com','get','Tom And Jerry')
   ```

   

3. åœ¨å…¥å£æ–‡ä»¶ä¸­å¯¼å…¥ `src/mock/index.js` æ–‡ä»¶

   ```js
   // å¯¼å…¥ Mock æ•°æ®
   import './mock'
   ```

   

4. å»`Test`ç»„ä»¶ä¸­å‘é€ä¸€ä¸ªè¯·æ±‚æµ‹è¯•ä¸€ä¸‹ã€‚

   ```js
     methods: {
       async Mock() {
         const res = await axios.get('http://www.test.com')
         console.log(res)
       }
     }
   ```

   

> ğŸ“Œ Tipï¼š
>
> ä½¿ç”¨`mockjs`åï¼Œæµè§ˆå™¨çš„ç½‘ç»œé€‰é¡¹å¡ä¸­ä¸€å®šçœ‹ä¸åˆ°ä»»ä½•çš„è¯·æ±‚ã€‚







## 2. Mock.js æ¨¡æ‹Ÿè½®æ’­å›¾å’Œæ¥¼å±‚æ•°æ®



**æ€è·¯åˆ†æï¼š**



é¦–é¡µä¸­`è½®æ’­å›¾åŒºåŸŸ`å’Œ`æ¥¼å±‚åŒºåŸŸ` æ•°æ®æ˜¯æ²¡æœ‰ç»™æä¾›çš„ï¼Œéœ€è¦æˆ‘ä»¬ä½¿ç”¨ `Mock` è¿›è¡Œæ¨¡æ‹Ÿ ï¼Œ`è½®æ’­å›¾åŒºåŸŸ`å’Œ`æ¥¼å±‚åŒºåŸŸ` çš„æ•°æ®ï¼Œç´ æä¸­å·²ç»ç»™æä¾›å¥½ï¼Œç›´æ¥ä½¿ç”¨å³å¯

```js
Mock.mock('åœ°å€','è¯·æ±‚æ–¹å¼', 'json æ•°æ®')
```



> ğŸ“Œ Tipï¼š
>
> åœ¨ä½¿ç”¨ `Mock` å¯¹æ•°æ®æ¨¡æ‹Ÿçš„æ—¶å€™ï¼Œæ¨¡æ‹Ÿçš„æ•°æ®å­—æ®µä¸æ˜¯å‰ç«¯éšæ„å®šä¹‰çš„ï¼Œè€Œä¸”éœ€è¦å’Œåç«¯è¿›è¡Œåå•†ï¼Œè§„å®šç›¸åº”çš„å­—æ®µï¼Œç„¶åä½¿ç”¨å¯¹åº”çš„å­—æ®µä½¿ç”¨ `Mock` è¿›è¡Œæ¨¡æ‹Ÿ





**å®ç°æ­¥éª¤ï¼š**

1. å¤åˆ¶ï¼š`é¦–é¡µå¹¿å‘Šè½®æ’­æ•°æ®.json`ã€`é¦–é¡µæ¥¼å±‚æ•°æ®.json`åˆ°`src/mock`ä¸­ã€‚

2. åˆ†åˆ«æ”¹åä¸ºï¼š`swiper.json`ã€`floor.json`ã€‚

3. ä¿®æ”¹`/src/mock/index.js`å¦‚ä¸‹ï¼š

   ```js
   import Mock from 'mockjs'
   import swiper from './swiper.json'
   import floor from './floor.json'
   
   // åˆ¶è®¢æ‹¦æˆªè§„åˆ™
   // Mock.mock('http://www.test.com', 'get', 'Tom And Jerry')
   
   // æ¨¡æ‹Ÿè½®æ’­å›¾çš„æ¥å£
   Mock.mock('http://www.test.com/swiper', 'get', {
     code: 200,
     message: 'æˆåŠŸ',
     ok: true,
     data: swiper
   })
   
   // æ¨¡æ‹Ÿè·å–æ¥¼å±‚ä¿¡æ¯çš„æ¥å£
   Mock.mock('http://www.test.com/floor', 'get', {
     code: 200,
     message: 'æˆåŠŸ',
     ok: true,
     data: floor
   })
   
   ```

   

4. å»`src\views\Test`é‡Œå‘ä¸ªè¯·æ±‚ï¼Œæµ‹è¯•ä¸€ä¸‹

   ```js
   methods: {
     async Mock() {
       const res1 = await axios.get('http://www.test.com/swiper')
       const res2 = await axios.get('http://www.test.com/floor')
       
       console.log(res1)
       console.log(res2)
     }
   }
   ```







## 3. ä¸º Mock.js å°è£… axios



**æ€è·¯åˆ†æï¼š**



å‰é¢æ•°æ®çš„æ¨¡æ‹Ÿå·²ç»åŸºæœ¬å’Œåç«¯è¿”å›çš„æ•°æ®ä¸€è‡´ï¼Œä½†æ˜¯è¡Œä¸ºä¸Šè¿˜ä¸ä¸€è‡´ï¼š

1. æ²¡æœ‰ç»Ÿä¸€è®¾ç½®è¯·æ±‚åŸºå‡†è·¯å¾„
2. æ²¡æœ‰è¿›åº¦æ¡
3. æ²¡æœ‰æ‹¦æˆªå™¨
4. ......ç­‰å…¶ä»–åŠŸèƒ½



æˆ‘ä»¬å¯ä»¥å°†ä¹‹å‰å°è£…çš„ `request.js` é‡æ–°å¤åˆ¶ä¸€ä»½ï¼Œå‘½åä¸º `mockRequest.js` å³å¯ï¼Œç„¶åæ›´æ”¹`æ ¹åŸŸå`å³å¯



> ğŸ“Œ Tipï¼š
>
> `Mock` çš„æ•°æ®ä»¥åŠ `mockRequest.js` éƒ½æ˜¯åœ¨å¼€å‘ä¸­ä½¿ç”¨çš„ï¼Œä¸Šçº¿åéƒ½éœ€è¦åˆ é™¤çš„ï¼Œæ‰€ä»¥æ²¡å¿…é¡»å†æ¬¡è¿›è¡Œåˆ¤æ–­å¤„ç†ï¼Œå› ä¸ºè¿™æ ·å¯¹ä»£ç è¿›è¡Œäº†ä¾µå…¥



**å®ç°æ­¥éª¤ï¼š**



1. å°†ä¹‹å‰å°è£…çš„ `request.js` é‡æ–°å¤åˆ¶ä¸€ä»½ï¼Œå‘½åä¸º `mockRequest.js` 

2. å°†æ ¹åŸŸå `baseURL` æ”¹ä¸º `http://www.test.com`

3. åˆ°`src\views\Test`å¯¼å…¥`mockRequest.js` ï¼Œå¹¶å‘èµ·è¯·æ±‚

   ```js
   <script>
   import mockRequest from '@/utils/mockRequest.js'
   
   export default {
     name: 'TestPage',
     methods: {
       async Mock() {
         const res1 = await mockRequest.get('/swiper')
         const res2 = await mockRequest.get('/floor')
         
         console.log(res1)
         console.log(res2)
       }
     }
   }
   </script>
   ```







## 4. è½®æ’­å›¾æ•°æ®å­˜å…¥vuex



**æ€è·¯åˆ†æï¼š**



è½®æ’­å›¾æ•°æ®å·²ç»è·å–æˆåŠŸï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥ï¼Œéœ€è¦è½®æ’­å›¾æ•°æ®æ¸²æŸ“è½®æ’­å›¾åŒºåŸŸï¼Œè½®æ’­å›¾æ•°æ®åªåœ¨é¦–é¡µè½®æ’­å›¾åŒºåŸŸè¿›è¡Œäº†ä½¿ç”¨ï¼Œæ‰€ä»¥å¤„ç†æ•°æ®çš„æ–¹å¼æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š



1. åœ¨ `ListContainer` ç»„ä»¶ä¸­ç›´æ¥è·å–æ•°æ®ï¼Œæ¸²æŸ“è½®æ’­å›¾åŒºåŸŸ
2. å°†æ•°æ®å­˜å‚¨åˆ° Vuex ä¸­



åœ¨å®é™…å¼€å‘ä¸­ï¼Œä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼æ¯”è¾ƒå¤šï¼Œä½†æ˜¯ç›®å‰æˆ‘ä»¬éœ€è¦ç»ƒä¹  `Vuex`ï¼Œå› æ­¤é‡‡ç”¨ç¬¬äºŒç§æ–¹å¼



**å®ç°æ­¥éª¤ï¼š**

1. åœ¨`/api/index.js` ä¸­å¯¼å…¥ `mockRequest.js`ï¼Œå¹¶å°è£…è·å–è½®æ’­å›¾æ•°æ®çš„æ¥å£ `api`
2. åœ¨ `state` ä¸­å®šè½®æ’­å›¾çŠ¶æ€
3. å®šä¹‰ `actions` æ–¹æ³•ï¼Œå¤„ç†å¼‚æ­¥çš„é€»è¾‘
4. å®šä¹‰ `mutations` æ–¹æ³•ï¼Œå¯¹æ•°æ®è¿›è¡Œå˜æ›´
5. åœ¨ç»„ä»¶ä¸­é€šè¿‡ `dispatch` æˆ–è€… `mapActions` è°ƒç”¨ `action` æ–¹æ³•



**è½åœ°ä»£ç ï¼š**

1. åœ¨`/api/index.js` ä¸­å¯¼å…¥ `mockRequest.js`ï¼Œå¹¶å°è£…è·å–è½®æ’­å›¾æ•°æ®çš„æ¥å£ `api`

   ```js
   // å¯¼å…¥å°è£…çš„ç½‘ç»œè¯·æ±‚å·¥å…· request.js
   import request from '@/utils/request'
   import mockRequest from '@/utils/mockRequest.js'
   
   
   /**
    * @description è¯·æ±‚è½®æ’­å›¾æ•°æ®
    * @returns Promise
    */
   export const reqSwiperList = () => mockRequest.get('/swiper')
   
   ```

   

2. åœ¨ `state` ä¸­å®šä¹‰çŠ¶æ€ï¼Œå®šä¹‰ `actions` æ–¹æ³•ï¼Œå¤„ç†å¼‚æ­¥çš„é€»è¾‘ï¼Œå®šä¹‰ `mutations` æ–¹æ³•ï¼Œå¯¹æ•°æ®è¿›è¡Œå˜æ›´

   ```js
   import { reqCategoryList, reqSwiperList } from '@/api/index'
   
   const state = {
     categoryList: [], // ä¸‰çº§åˆ†ç±»æ•°æ®
     swiperList: [] // è½®æ’­å›¾æ•°æ®
   }
   
   const getters = {}
   
   const mutations = {
     // æ›´æ–°ä¸‰çº§åˆ†ç±»æ•°æ®
     // coding......
   
     // å­˜å‚¨è½®æ’­å›¾æ•°æ®
     SAVE_SWIPER_LIST(state, list) {
       state.swiperList = list
     }
   }
   
   const actions = {
     // è·å–ä¸‰çº§åˆ†ç±»åˆ—è¡¨æ•°æ®
     // coding......
   
     // ä¸“é—¨ç”¨äºè·å–è½®æ’­å›¾æ•°æ®
     async getSwiperList(context) {
       const result = await reqSwiperList()
       // åˆ¤æ–­æ˜¯å¦è·å–æˆåŠŸ
       if (result.code === 200) {
         // è‹¥æˆåŠŸï¼Œè”ç³»å¯¹åº”çš„muatationå»å­˜å‚¨æ•°æ®
         context.commit('SAVE_SWIPER_LIST', result.data)
       } else {
         // è‹¥è·å–ä¸æˆåŠŸï¼Œæç¤ºåŸå› 
         alert(result.message)
       }
     }
   }
   
   export default {
     namespaced: true,
     state,
     getters,
     mutations,
     actions
   }
   
   ```

   

3. åœ¨ç»„ä»¶ä¸­é€šè¿‡ `dispatch` æˆ–è€… `mapActions` è°ƒç”¨ `action` æ–¹æ³•

   ```js
   <script>
   export default {
     name: 'ListEl',
     mounted() {
       this.$store.dispatch('home/getSwiperList')
     }
   }
   </script>
   ```







##  5. å¤„ç†æ•°æ®çš„å‡æŠ¥é”™ 



**æ€è·¯åˆ†æï¼š**



æˆ‘ä»¬åœ¨é¡µé¢ä¸Šï¼Œæ‹¿åˆ°æ•°æ®åè¿›è¡Œæ¸²æŸ“

```html
<!-- è¿™ç§æ–¹å¼ä¸ä¼šæŠ¥é”™ -->
<h2>{{ $store.state.home.swiperList[0] }}</h2>

<!-- è¿™ç§æ–¹å¼ä¼šæŠ¥é”™ -->
<h2>{{ $store.state.home.swiperList[0].imgUrl }}</h2>
```



æ­¤æ—¶ï¼Œæµè§ˆå™¨æ§åˆ¶å°ä¼šæŠ¥é”™ï¼Œä½†æ˜¯é¡µé¢å´æ¸²æŸ“æˆåŠŸäº†~~ â—â—

<img src="./images/3-1 å‡æŠ¥é”™.png" style="zoom:80%; border: 1px solid #ccc" />



åŸå› ï¼š

1. é¦–å…ˆè§£ææ¨¡æ¿çš„æ•°æ®ï¼Œè¿˜æ²¡æœ‰æ•°æ®ï¼Œæ‰€ä»¥æŠ¥é”™
2. ç­‰æ•°æ®è¯·æ±‚å›æ¥åï¼Œæ•°æ®æ›´æ–°ï¼Œæ•°æ®æ›´æ–°é©±åŠ¨è§†å›¾æ›´æ–°ï¼Œæ‰€ä»¥é¡µé¢æ˜¾ç¤ºäº†æ­£ç¡®çš„æ•°æ®





**è§£å†³æ–¹æ¡ˆï¼š**

1. ç¬¬ä¸€ç§æ–¹æ³•ï¼šåœ¨æœ€åˆå°±è®¾è®¡å¥½æ•°æ®å±‚æ¬¡ã€‚

   ```js
   const state = {
     a:[{}],
     x:{y:{}}
   }
   ```

   

2. ç¬¬äºŒç§æ–¹æ³•ï¼šä½¿ç”¨æ•°æ®æ—¶åŠ åˆ¤æ–­ã€‚

   ```html
   <h1 v-if="a[0]">{{a[0].id}}</h1>
   <h1 v-if="x.y">{{x.y.z}}</h1>
   ```

   

3. å¤‡æ³¨ï¼šè‹¥æ¨¡æ¿ä¸­æ°å·§ä½¿ç”¨äº†`v-for`éå†ï¼Œé‚£ä¹ˆé—®é¢˜è‡ªåŠ¨æ¶ˆå¤±ã€‚

   ```html
   <h1 v-for="s in slideList" :key="s.id">{{s.imgUrl}}</h1>
   ```

   



## 6. æ¸²æŸ“è½®æ’­å›¾æ•°æ®



**æ€è·¯åˆ†æï¼š**



æ•°æ®å·²ç»è·å–æˆåŠŸï¼Œå°±éœ€è¦ä½¿ç”¨ `v-for`  å¯¹æ•°æ®éå†ï¼Œç„¶åæ¸²æŸ“è½®æ’­å›¾ï¼Œä½†æ˜¯åœ¨æ¸²æŸ“æ•°æ®çš„æ—¶å€™ï¼Œä¼šå‘ç°é¡µé¢å›¾ç‰‡æ²¡æœ‰æ¸²æŸ“æˆåŠŸï¼Œæ§åˆ¶å°ä¼šæŠ¥é”™ï¼Œå®¡æŸ¥å…ƒç´ ä¼šå‘ç°ï¼Œå›¾ç‰‡è·¯å¾„ä¸å…¨ã€‚å®Œæ•´çš„è·¯å¾„ï¼š

```
å®Œæ•´çš„å›¾ç‰‡è·¯å¾„ï¼šåè®®://åŸŸå/å›¾ç‰‡è·¯å¾„
```





<img src="./images/3-2 è·¯å¾„.png" style="zoom:60%; border: 1px solid #ccc" />



<img src="./images/3-3 è·¯å¾„.png" style="zoom:100%; border: 1px solid #ccc" />





**è§£å†³æ–¹æ¡ˆï¼š**



1. è„šæ‰‹æ¶çš„æ ¹è·¯å¾„æ˜¯ï¼š`public`æ–‡ä»¶å¤¹
2. æ“ä½œæ˜¯ï¼šæŠŠ`ListContainer`ä¸­çš„å›¾ç‰‡å‰ªåˆ‡ä¸€ä»½ï¼Œæ”¾åœ¨`public\images`ä¸­ï¼Œè¿™æ ·é¡¹ç›®æ‰èƒ½ç”¨







## 7. Swiper è½®æ’­å›¾æ’ä»¶ä½¿ç”¨



**swiper æ˜¯ä»€ä¹ˆï¼š**



![](./images/3-4 swiper.png)



1. Swiper æ˜¯ä¸€æ¬¾å¼€æºã€å…è´¹ã€å¼ºå¤§çš„è§¦æ‘¸æ»‘åŠ¨æ’ä»¶
2. Swiper æ˜¯çº¯ javascriptæ‰“é€ çš„æ»‘åŠ¨ç‰¹æ•ˆæ’ä»¶ï¼Œé¢å‘PCã€æ‰‹æœºã€å¹³æ¿ç”µè„‘ç­‰ç§»åŠ¨ç»ˆç«¯
3. Swiper èƒ½å®ç°è§¦å±ç„¦ç‚¹å›¾ã€è§¦å±Tabåˆ‡æ¢ã€è§¦å±è½®æ’­å›¾åˆ‡æ¢ç­‰å¸¸ç”¨æ•ˆæœ





**vue-awesome-swiper æ˜¯ä»€ä¹ˆï¼š**



`Swiper` ä¸ºäº†æ›´å¥½çš„å…¼å®¹ `Vue`ï¼Œä½œè€…å¼€å‘äº† `vue-awesome-swiper ` è¿™ä¸ªå¼€æºåº“

å®˜æ–¹ç½‘å€ï¼š[vue-awesome-swiper](https://swiperjs.com/vue)

Github åœ°å€ï¼š[vue-awesome-swiper](https://github.com/surmon-china/vue-awesome-swiper)



ç›®å‰å®˜æ–¹ä»“åº“å·²ç»å…¨éƒ¨åªæ˜¯ Vue 3ï¼Œå¦‚æœæƒ³åœ¨ Vue2 ä¸­ä½¿ç”¨ï¼Œéœ€è¦å®‰è£…ç‰¹å®šçš„ç‰ˆæœ¬ã€

```shell
npm install vue-awesome-swiper@4.1.1 --save
```





**è½åœ°ä»£ç ï¼š**



1. å®‰è£… `vue-awesome-swiper`

   ```shell
   npm install vue-awesome-swiper@4.1.1 --save
   ```

   

2. åœ¨ `Test` ç»„ä»¶ä¸­ï¼Œæµ‹è¯• `vue-awesome-swiper`

   ```vue
   <template>
     <div>
       <swiper class="swiper" :options="swiperOption">
         <swiper-slide>Slide 1</swiper-slide>
         <swiper-slide>Slide 2</swiper-slide>
         <swiper-slide>Slide 3</swiper-slide>
         <swiper-slide>Slide 4</swiper-slide>
         <swiper-slide>Slide 5</swiper-slide>
         <swiper-slide>Slide 6</swiper-slide>
         <swiper-slide>Slide 7</swiper-slide>
         <swiper-slide>Slide 8</swiper-slide>
         <swiper-slide>Slide 9</swiper-slide>
         <swiper-slide>Slide 10</swiper-slide>
         <div class="swiper-pagination" slot="pagination"></div>
         <div class="swiper-button-prev" slot="button-prev"></div>
         <div class="swiper-button-next" slot="button-next"></div>
       </swiper>
     </div>
   </template>
   
   <script>
   
   import { Swiper, SwiperSlide } from 'vue-awesome-swiper'
   import 'swiper/css/swiper.css'
   
   export default {
     name: 'TestPage',
     components: {
       Swiper,
       SwiperSlide
     },
     data() {
       return {
         swiperOption: {
           slidesPerView: 1,
           spaceBetween: 30,
           loop: true,
           pagination: {
             el: '.swiper-pagination',
             clickable: true
           },
           navigation: {
             nextEl: '.swiper-button-next',
             prevEl: '.swiper-button-prev'
           }
         }
       }
     }
   }
   </script>
   
   <style lang="less" scoped>
   .swiper {
     height: 400px;
   }
   </style>
   
   ```







## 8. Swiper è½®æ’­å›¾æ’ä»¶å‚æ•°



**æ€è·¯åˆ†æï¼š**



`vue-awesome-swiper` æ˜¯åŸºäº `swiper` çš„å°è£…ï¼Œå› æ­¤å‚æ•°æ–‡æ¡£æˆ‘ä»¬åº”è¯¥çœ‹ `swiper` æ–‡æ¡£

[swiper å‚æ•°æ–‡æ¡£](https://www.swiper.com.cn/api/index.html)



**è½åœ°ä»£ç ï¼š**

```vue
<script>

import { Swiper, SwiperSlide } from 'vue-awesome-swiper'
import 'swiper/css/swiper.css'

export default {
  name: 'TestPage',
  components: {
    Swiper,
    SwiperSlide
  },
  data() {
    return {
      // è½®æ’­å›¾é…ç½®å¯¹è±¡
      swiperOption: {
        slidesPerView: 1, // è½®æ’­å›¾å±•ç¤ºå‡ å±ï¼ŒåŒä¸€é¡µé¢å±•ç¤ºå‡ ä¸ªè½®æ’­å›¾
        spaceBetween: 30, // æ¯å±ä¹‹é—´çš„é—´éš”
        loop: true, // æ˜¯å¦å¾ªç¯æ’­æ”¾
        // autoplay: true, // æ˜¯å¦è‡ªåŠ¨æ’­æ”¾
        autoplay: {
          delay: 2500 // è½®æ’­é—´éš”
        },
        // åˆ†é¡µå™¨é…ç½®ï¼ˆå°åœ†ç‚¹ï¼‰
        pagination: {
          el: '.swiper-pagination', // åˆ†é¡µå™¨å®¹å™¨
          clickable: true, // å°åœ†ç‚¹æ˜¯å¦å¯ä»¥ç‚¹å‡»
          bulletActiveClass: 'my-bullet-active' // å½“å‰è¢«æ¿€æ´»çš„å°åœ†ç‚¹ç±»å‹
        },
        // å¯¼èˆªæŒ‰é’®ï¼ˆå·¦ç®­å¤´ã€å³ç®­å¤´ï¼‰
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev'
        }
      }
    }
  }
}
</script>

<style lang="less" scoped>
.swiper {
  height: 400px;
}
// æ·±åº¦ä½œç”¨é€‰æ‹©å™¨
/deep/ .my-bullet-active {
  background: #ea4a36;
  opacity: 1;
}
</style>

```







## 9.  ListContainer ä¸­çš„è½®æ’­å›¾



**æ€è·¯åˆ†æï¼š**



ç›´æ¥å¤ç”¨ Test ç»„ä»¶ä¸­çš„è½®æ’­å›¾ä»£ç å³å¯



**è½åœ°ä»£ç ï¼š**



æ¨¡æ¿åŒºåŸŸ

```html
<div class="center">
  <swiper class="swiper" :options="swiperOption">
    <swiper-slide v-for="item in swiperList" :key="item.id">
      <img :src="item.imgUrl" />
    </swiper-slide>
    <div class="swiper-pagination" slot="pagination"></div>
    <div class="swiper-button-prev" slot="button-prev"></div>
    <div class="swiper-button-next" slot="button-next"></div>
  </swiper>
</div>
```



js åŒºåŸŸ

```vue
<script>
import { mapState } from 'vuex'
import { Swiper, SwiperSlide } from 'vue-awesome-swiper'
import 'swiper/css/swiper.css'

export default {
  name: 'ListEl',
  components: {
    Swiper,
    SwiperSlide
  },
  data() {
    return {
      // è½®æ’­å›¾é…ç½®å¯¹è±¡
      swiperOption: {
        initialSlide: 1, // åˆå§‹åŒ–è½®æ’­å›¾çš„ç´¢å¼•
        slidesPerView: 1, // è½®æ’­å›¾å±•ç¤ºå‡ å±ï¼ŒåŒä¸€é¡µé¢å±•ç¤ºå‡ ä¸ªè½®æ’­å›¾
        spaceBetween: 30, // æ¯å±ä¹‹é—´çš„é—´éš”
        loop: true, // æ˜¯å¦å¾ªç¯æ’­æ”¾
        // autoplay: true, // æ˜¯å¦è‡ªåŠ¨æ’­æ”¾
        autoplay: {
          delay: 2500 // è½®æ’­é—´éš”
        },
        // åˆ†é¡µå™¨é…ç½®ï¼ˆå°åœ†ç‚¹ï¼‰
        pagination: {
          el: '.swiper-pagination', // åˆ†é¡µå™¨å®¹å™¨
          clickable: true, // å°åœ†ç‚¹æ˜¯å¦å¯ä»¥ç‚¹å‡»
          bulletActiveClass: 'my-bullet-active' // å½“å‰è¢«æ¿€æ´»çš„å°åœ†ç‚¹ç±»å‹
        },
        // å¯¼èˆªæŒ‰é’®ï¼ˆå·¦ç®­å¤´ã€å³ç®­å¤´ï¼‰
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev'
        }
      }
    }
  },
  mounted() {
    this.$store.dispatch('home/getSwiperList')
  },
  computed: {
    ...mapState('home', ['swiperList'])
  }
}
</script>
```







## 10. æ¥¼å±‚æ•°æ®å­˜å…¥Vuex



**å®ç°æ­¥éª¤ï¼š**



1. åœ¨`/api/index.js` ä¸­å¯¼å…¥ `mockRequest.js`ï¼Œå¹¶å°è£…è·å–æ¥¼å±‚æ•°æ®çš„æ¥å£ `api`
2. åœ¨ `state` ä¸­å®šæ¥¼å±‚çŠ¶æ€
3. å®šä¹‰ `actions` æ–¹æ³•ï¼Œå¤„ç†å¼‚æ­¥çš„é€»è¾‘
4. å®šä¹‰ `mutations` æ–¹æ³•ï¼Œå¯¹æ•°æ®è¿›è¡Œå˜æ›´
5. åœ¨ç»„ä»¶ä¸­é€šè¿‡ `dispatch` æˆ–è€… `mapActions` è°ƒç”¨ `action` æ–¹æ³•



**è½åœ°ä»£ç ï¼š**



1. åœ¨`/api/index.js` ä¸­å¯¼å…¥ `mockRequest.js`ï¼Œå¹¶å°è£…è·å–æ¥¼å±‚æ•°æ®çš„æ¥å£ `api`

   ```js
   /**
    * @description è¯·æ±‚æ¥¼å±‚æ•°æ®
    * @returns Promise
    */
   export const reqFloorList = () => mockRequest.get('/floor')
   ```

   

2. åœ¨ `state` ä¸­å®šä¹‰çŠ¶æ€ï¼Œå®šä¹‰ `actions` æ–¹æ³•ï¼Œå¤„ç†å¼‚æ­¥çš„é€»è¾‘ï¼Œå®šä¹‰ `mutations` æ–¹æ³•ï¼Œå¯¹æ•°æ®è¿›è¡Œå˜æ›´

   ```js
   import { reqCategoryList, reqSwiperList, reqFloorList } from '@/api/index'
   
   const state = {
     categoryList: [], // ä¸‰çº§åˆ†ç±»æ•°æ®
     swiperList: [], // è½®æ’­å›¾æ•°æ®
     floorList: [] // æ¥¼å±‚æ•°æ®
   }
   
   const getters = {}
   
   const mutations = {
     // æ›´æ–°ä¸‰çº§åˆ†ç±»æ•°æ®
     // coding......
   
     // å­˜å‚¨è½®æ’­å›¾æ•°æ®
     // coding......
   
     // å­˜å‚¨æ¥¼å±‚æ•°æ®
     SAVE_FLOOR_LIST(state, value) {
       state.floorList = value
     }
   }
   
   const actions = {
     // è·å–ä¸‰çº§åˆ†ç±»åˆ—è¡¨æ•°æ®
     // coding......
   
     // ä¸“é—¨ç”¨äºè·å–è½®æ’­å›¾æ•°æ®
     // coding......
   
     // ä¸“é—¨ç”¨äºè·å–è½®æ¥¼å±‚æ•°æ®
     async getFloorList({ commit }) {
       const result = await reqFloorList()
       if (result.code === 200) {
         commit('SAVE_FLOOR_LIST', result.data)
       } else {
         alert(result.message)
       }
     }
   }
   
   export default {
     namespaced: true,
     state,
     getters,
     mutations,
     actions
   }
   
   ```

   

3. åœ¨ç»„ä»¶ä¸­é€šè¿‡ `dispatch` æˆ–è€… `mapActions` è°ƒç”¨ `action` æ–¹æ³•

   ```js
   <script>
   import { mapState } from 'vuex'
   
   export default {
     name: 'FloorEl',
     mounted() {
       this.$store.dispatch('home/getFloorList')
     },
     // åˆ©ç”¨è®¡ç®—å±æ€§ å’Œ mapState æ–¹æ³•è¯»å–æ•°æ®
     computed: {
       ...mapState({
         floorList: (state) => state.home.floorList
       })
     }
   }
   </script>
   ```







## 11. æ¸²æŸ“ Floor ç»„ä»¶(ä¸åŒ…å«è½®æ’­å›¾)



**æ€è·¯åˆ†æï¼š**

> è¯´æ˜ï¼šè¿™ä¸ªä»»åŠ¡æ²¡æœ‰æŠ€æœ¯å«é‡ï¼Œå°±æ˜¯ä¸€ä¸ªä½“åŠ›æ´»ï¼Œå¤§å®¶é€‰æ‹©æ€§ç»ƒä¹ ã€‚



**å®ç°æ­¥éª¤ï¼š**



1. ç”±äº`Floor`ç»„ä»¶æ˜¯`Home`çš„å­ç»„ä»¶ï¼Œ`Home`ç»„ä»¶ä¸­è¦æ ¹æ®æ•°æ®å†³å®šä½¿ç”¨å‡ ä¸ª`Floor`ã€‚

2. `Home`ç»„ä»¶è¯»å–æ¥¼å±‚æ•°æ®

   ```js
   ...mapState({
     floorList:state => state.home.floorList
   })
   ```

3. åé€šè¿‡`props`ä¼ ç»™`Floor`ç»„ä»¶ã€‚

   ```vue
   <!-- æ¥¼å±‚ -->
   <Floor v-for="floor in floorList" :key="floor.id" :floor="floor"/>
   ```

4. `Floor`ç»„ä»¶æ¥æ”¶æ•°æ®

   ```js
   export default {
     name: 'Floor',
     props:['floor']
   }
   ```

5. å¤åˆ¶`Floor`ç»„ä»¶ä¸­çš„å›¾ç‰‡åˆ°ï¼š`src/public/images`

6. æ•°æ®è¯´æ˜ï¼š

   - imgUrlï¼šå·¦ä¾§å›¾ç‰‡
   - carouselListï¼šè½®æ’­æ•°æ®ï¼ˆæš‚æ—¶ä¸ç”¨ï¼‰
   - keywordsï¼šå·¦ä¾§å…³é”®è¯
   - nameï¼šæ¥¼å±‚å
   - navListï¼šå³ä¸Šè§’åˆ†ç±»
   - recommendListï¼šå³ä¾§å››ä¸ªå›¾ç‰‡
   - bigImgï¼šå³ä¾§å›¾ç‰‡ç»„çš„å¤§å›¾

![](./images/3-5 floor_about.png)



**è½åœ°ä»£ç ï¼š**

```vue
<template>
  <div>
    <div class="floor" v-for="floor in floorList" :key="floor.id">
      <div class="py-container">
        <div class="title clearfix">
          <h3 class="fl">{{ floor.name }}</h3>
          <div class="fr">
            <ul class="nav-tabs clearfix">
              <li class="active" v-for="(nav, index) in floor.navList" :key="index">
                <a :href="nav.url" data-toggle="tab">{{ nav.text }}</a>
              </li>
            </ul>
          </div>
        </div>
        <div class="tab-content">
          <div class="tab-pane">
            <div class="floor-1">
              <div class="blockgary">
                <ul class="jd-list">
                  <li v-for="(keyword, index) in floor.keywords" :key="index">{{ keyword }}</li>
                </ul>
                <img :src="floor.imgUrl" />
              </div>
              <div class="floorBanner">
                <div class="swiper-container" id="floor1Swiper">
                  <div class="swiper-wrapper">
                    <div class="swiper-slide">
                      <img src="./images/floor-1-b01.png" />
                    </div>
                    <div class="swiper-slide">
                      <!-- <img src="./images/floor-1-b02.png" /> -->
                    </div>
                    <div class="swiper-slide">
                      <!-- <img src="./images/floor-1-b03.png" /> -->
                    </div>
                  </div>
                  <!-- å¦‚æœéœ€è¦åˆ†é¡µå™¨ -->
                  <div class="swiper-pagination"></div>

                  <!-- å¦‚æœéœ€è¦å¯¼èˆªæŒ‰é’® -->
                  <div class="swiper-button-prev"></div>
                  <div class="swiper-button-next"></div>
                </div>
              </div>
              <div class="split">
                <span class="floor-x-line"></span>
                <div class="floor-conver-pit">
                  <img :src="floor.recommendList[0]" />
                </div>
                <div class="floor-conver-pit">
                  <img :src="floor.recommendList[1]" />
                </div>
              </div>
              <div class="split center">
                <img :src="floor.bigImg" />
              </div>
              <div class="split">
                <span class="floor-x-line"></span>
                <div class="floor-conver-pit">
                  <img :src="floor.recommendList[2]" />
                </div>
                <div class="floor-conver-pit">
                  <img :src="floor.recommendList[3]" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
```







## 12. Floorä¸­çš„è½®æ’­å›¾



**æ€è·¯åˆ†æï¼š**

>  è¯´æ˜ï¼šè¿™ä¸ªä»»åŠ¡æ²¡æœ‰æŠ€æœ¯å«é‡ï¼Œå°±æ˜¯ä¸€ä¸ªä½“åŠ›æ´»ï¼Œå¤§å®¶é€‰æ‹©æ€§ç»ƒä¹ ã€‚

**å®ç°æ­¥éª¤ï¼š**

**è½åœ°ä»£ç ï¼š**

```vue
<template>
  <div>
    <div class="floor" v-for="floor in floorList" :key="floor.id">
      <div class="py-container">
        <div class="title clearfix">
          <h3 class="fl">{{ floor.name }}</h3>
          <div class="fr">
            <ul class="nav-tabs clearfix">
              <li class="active" v-for="(nav, index) in floor.navList" :key="index">
                <a :href="nav.url" data-toggle="tab">{{ nav.text }}</a>
              </li>
            </ul>
          </div>
        </div>
        <div class="tab-content">
          <div class="tab-pane">
            <div class="floor-1">
              <div class="blockgary">
                <ul class="jd-list">
                  <li v-for="(keyword, index) in floor.keywords" :key="index">{{ keyword }}</li>
                </ul>
                <img :src="floor.imgUrl" />
              </div>
              <div class="floorBanner">
                <swiper class="swiper" :options="swiperOption" v-if="floor.carouselList">
                  <swiper-slide v-for="item in floor.carouselList" :key="item.id">
                    <img :src="item.imgUrl" />
                  </swiper-slide>
                  <div class="swiper-pagination" slot="pagination"></div>
                  <div class="swiper-button-prev" slot="button-prev"></div>
                  <div class="swiper-button-next" slot="button-next"></div>
                </swiper>
              </div>
              <div class="split">
                <span class="floor-x-line"></span>
                <div class="floor-conver-pit">
                  <img :src="floor.recommendList[0]" />
                </div>
                <div class="floor-conver-pit">
                  <img :src="floor.recommendList[1]" />
                </div>
              </div>
              <div class="split center">
                <img :src="floor.bigImg" />
              </div>
              <div class="split">
                <span class="floor-x-line"></span>
                <div class="floor-conver-pit">
                  <img :src="floor.recommendList[2]" />
                </div>
                <div class="floor-conver-pit">
                  <img :src="floor.recommendList[3]" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import { mapState } from 'vuex'
import { Swiper, SwiperSlide } from 'vue-awesome-swiper'
import 'swiper/css/swiper.css'

export default {
  name: 'FloorEl',
  components: {
    Swiper,
    SwiperSlide
  },
  data() {
    return {
      // è½®æ’­å›¾é…ç½®å¯¹è±¡
      swiperOption: {
        slidesPerView: 1, // è½®æ’­å›¾å±•ç¤ºå‡ å±ï¼ŒåŒä¸€é¡µé¢å±•ç¤ºå‡ ä¸ªè½®æ’­å›¾
        spaceBetween: 30, // æ¯å±ä¹‹é—´çš„é—´éš”
        loop: true, // æ˜¯å¦å¾ªç¯æ’­æ”¾
        // autoplay: true, // æ˜¯å¦è‡ªåŠ¨æ’­æ”¾
        autoplay: {
          delay: 2500 // è½®æ’­é—´éš”
        },
        // åˆ†é¡µå™¨é…ç½®ï¼ˆå°åœ†ç‚¹ï¼‰
        pagination: {
          el: '.swiper-pagination', // åˆ†é¡µå™¨å®¹å™¨
          clickable: true, // å°åœ†ç‚¹æ˜¯å¦å¯ä»¥ç‚¹å‡»
          bulletActiveClass: 'my-bullet-active' // å½“å‰è¢«æ¿€æ´»çš„å°åœ†ç‚¹ç±»å‹
        },
        // å¯¼èˆªæŒ‰é’®ï¼ˆå·¦ç®­å¤´ã€å³ç®­å¤´ï¼‰
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev'
        }
      }
    }
  },
  mounted() {
    this.$store.dispatch('home/getFloorList')
  },
  // åˆ©ç”¨è®¡ç®—å±æ€§ å’Œ mapState æ–¹æ³•è¯»å–æ•°æ®
  computed: {
    ...mapState({
      floorList: (state) => state.home.floorList
    })
  }
}
</script>

```



